<!DOCTYPE html>
<html>
  <head>

    </head>


<style>


body 
{background-image: linear-gradient(180deg, rgb(146, 26, 193) , rgb(192, 130, 23));
font-family:digital;
height:100vh;
overflow: hidden;
padding:0;
margin:0
}
.container{
text-align:center;
padding-top:30px
}

#Hours , #Minutes {
background: #ffffff1a;backdrop-filter: blur(20px);
color:#fff;
border-radius:999px;
padding:4px;
border:4px solid #ffffff1a;
width:300px;
outline: none;
cursor: pointer;
font-weight: bold;
font-size:16px;
margin: 5px;
direction:rtl;
text-align:center

}


option{
background: rgba(0,0,0,0.1);
color:#444;
border-radius:999px;
padding:4px;
border:1px solid #fff;
width:300px;
outline: none;
cursor: pointer;
font-weight: bold;
font-size:15px;
margin: 5px;
direction:rtl

}
.total {
color:#fff;
font-weight: bold;
font-size:25px;


}
.save{
background: #ffffff1a;backdrop-filter: blur(20px);
color:#fff;
border-radius:999px;
padding:5px;
border:3px solid transparent;
width:410px;
outline: none;
cursor: pointer;
font-weight: bold;
font-size:20px;
margin:30px 5px 10px 5px;
box-shadow: 0px 0px 7px  #fff;
}


.save:hover{
box-shadow: 0px 0px 30px  #fff;
}


#play{
width:100%;
height:calc(100vh + 100px);
background: #ffffff1a;backdrop-filter: blur(20px);
text-align:center;
position:absolute;
top:0;
display:none;
cursor: pointer;
z-index:10;
margin:auto



}



</style>
<body>


<div id="play" onclick="clo(this)" title="إضغط لإغلاق المنبه" style="text-align: center;">
</div>


<div class="container">
<div style="margin:auto">
  <iframe  src="./canvas.html" width="100%" height="300px" scrolling="no" style="border:none" >

  </iframe></div>
<form style="display:flex;justify-content:center;margin-top:20px">



<label for="Minutes"></label>
<select name="Minutes" id="Minutes"  onchange="minutes(this.value)">
<option value="0" disabled selected>اختر الدقيقة :</option>
<option value="1" >1</option>
<option value="2" >2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6" >6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10" >10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14" >14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18" >18</option>
<option value="19"> 19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22" >22</option>
<option value="23">23</option>
<option value="24">24</option>

<option value="25" >25</option>
<option value="26" >26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30" >30</option>
<option value="31">31</option>
<option value="32">32</option>
<option value="33">33</option>
<option value="34" >34</option>
<option value="35">35</option>
<option value="36">36</option>
<option value="37">37</option>
<option value="38" >38</option>
<option value="39">39</option>
<option value="40">40</option>
<option value="41">41</option>
<option value="42" >42</option>
<option value="43"> 43</option>
<option value="44">44</option>
<option value="45">45</option>
<option value="46" >46</option>
<option value="47">47</option>
<option value="48">48</option> 

<option value="49">49</option>
<option value="50">50</option>
<option value="51" >51</option>
<option value="52"> 52</option>
<option value="53">53</option>
<option value="54">54</option>
<option value="55" >55</option>
<option value="56">56</option>
<option value="57">57</option> 

<option value="58" >58</option>
<option value="59">59</option>
<option value="60">60</option> 

</select>
<br><br>


<label for="Hours"></label>
<select name="Hours" id="Hours"  onchange="hours(this.value)">
<option value="0" disabled selected>اختر الساعة :</option>
<option value="1" >1</option>
<option value="2" >2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6" >6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10" >10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14" >14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18" >18</option>
<option value="19"> 19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22" >22</option>
<option value="23">23</option>
<option value="24">24</option>



</select>
<br><br>


</form>

<button onclick="save()" class="save">ظبط المنبه</button>

<p class="total" id="total"></p>
</div>




<script>

function hours(event){

var d = new Date();
var hour = d.getHours();
var min = d.getMinutes();
var sec = d.getSeconds();
var gab = Math.abs(60 - min) ;
var m =  document.getElementById("Minutes").value;


if(event <= hour-1 && m < min){
return document.getElementById("total").innerHTML = hour-1 + ":" + min + " يجب ظبط المنبه ليعمل بعد الوقت الحالي" ;
}


else{

var d = new Date();
var hour = d.getHours();
var min = d.getMinutes();
var sec = d.getSeconds();
var gab = Math.abs(60 - min) ;


var h =  document.getElementById("Hours").value;
var m =  document.getElementById("Minutes").value;
var re_hour = Math.abs(hour-1 - h)  ;
var re_minutes = Math.abs(m) ;
var thegab = Math.abs(re_minutes + gab) ;
var gmin = Math.abs(m - min) ;


/*

if( m < 1 ){
return   document.getElementById("total").innerHTML = " تم ظبط المنبه ليعمل بعد "  + " "  +  `${re_hour -1}`   + " من الساعات وبعد " + "  " +  thegab +  " " + "من الدقائق";
minutes();

}
*/


if( m == 0 || h == 0){
return   document.getElementById("total").innerHTML = "يرجى إختيار الساعة والدقيقة";
minutes();
}


else if (re_hour == 0  && m <= min ) {
return  document.getElementById("total").innerHTML = hour-1 + ":" + min + " يجب ظبط المنبه ليعمل بعد الوقت الحالي" ;
minutes();

}


else if (re_hour == 0  && m > min ) {
return  document.getElementById("total").innerHTML = " تم ظبط المنبه ليعمل بعد "  + " "  +  0  + " من الساعات وبعد " + "  " +  gmin +  " " + "من الدقائق";
minutes();

}




else if(h < hour-1){
return document.getElementById("total").innerHTML = hour-1 + ":" + min + " يجب ظبط المنبه ليعمل بعد الوقت الحالي" ;
minutes();

}
else if (m >= 1 && re_hour >= 1 ) {


if (thegab >= 60 ) {
return  document.getElementById("total").innerHTML = " تم ظبط المنبه ليعمل بعد "  + " "  +  `${re_hour}`   + " من الساعات وبعد " + "  " +  `${thegab -60}` +  " " + "من الدقائق";
minutes();

}

else{
return document.getElementById("total").innerHTML = " تم ظبط المنبه ليعمل بعد "  + " "  +  `${re_hour -1}`   + " من الساعات وبعد " + "  " +  thegab +  " " + "من الدقائق";
minutes();

}
}






}}




function minutes(event){

var h =  document.getElementById("Hours").value;
var d = new Date();
var hour = d.getHours();
var min = d.getMinutes();
var sec = d.getSeconds();
var gab = Math.abs(60 - min) ;
var gmin = Math.abs(event - min) ;


if(event < min  && h <= hour-1 ){
document.getElementById("minutes_value").innerHTML = 0;
return document.getElementById("total").innerHTML = hour-1 + ":" + min + " يجب ظبط المنبه ليعمل بعد الوقت الحالي" ;


}




else{
var d = new Date();
var hour = d.getHours();
var min = d.getMinutes();
var sec = d.getSeconds();
var gab = Math.abs(60 - min) ;

var h =  document.getElementById("Hours").value;
var m =  document.getElementById("Minutes").value;
var re_hour = Math.abs(hour-1 - h ) ;
var re_minutes = Math.abs(event) ;
var thegab = Math.abs(re_minutes + gab) ;
var gmin = Math.abs(event - min) ;


document.getElementById("minutes_value").innerHTML = event;
document.getElementById("minutes_value").innerHTML = m;

}}


function start() {

var d = new Date();
var hour = d.getHours();
var min = d.getMinutes();
var sec = d.getSeconds();

var h =  document.getElementById("Hours").value;
var m =  document.getElementById("Minutes").value;


var re_hour = Math.abs(hour-1 - h ) * 60 ;
var re_minutes = Math.abs(min - m)  * 1 ;


result = (re_hour + re_minutes)  * 60 * 1000 ; 
document.getElementById("total").innerHTML = hours();

return result;
}

function alarm(){




document.getElementById("play").style.display = "block";    


document.getElementById("play").innerHTML = "<center><img src='./alarm.gif' style='text-align:center;auto;min-width:20%;height:300px;border-radius:999px;margin-top:100px'></center><audio loop controls autoplay style='opacity:0' id='myAudio'><source src='alarm.mp3' type='audio/mp3'>Your browser does not support the audio element.</audio>";


clearInterval(start);
start() == 0 ;

}


function clo(play){


  play.style.display = "none";   
  
var x = document.getElementById("myAudio"); 
  x.pause();  
  

}
function save(){

setInterval(start, 1000);
setTimeout(alarm, start());

}




</script>




</body>

</html>
